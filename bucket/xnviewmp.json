{
    "homepage": "https://www.xnview.com/en/xnviewmp/",
    "description": "Photo viewer, image resizer & batch converter.",
    "version": "0.96",
    "license": "Freeware|Proprietary",
    "depends": "setuserfta",
    "architecture": {
        "64bit": {
            "url": [
                "https://download.xnview.com/XnViewMP-win-x64.zip",
                "https://raw.githubusercontent.com/kkzzhizhou/scoop-zapps/master/scripts/xnviewmp/assoc.reg",
                "https://raw.githubusercontent.com/kkzzhizhou/scoop-zapps/master/scripts/xnviewmp/unassoc.reg"
            ],
            "hash": [
                "7c5db6dd19efe3a6511b97f3c882ac8d534e383e48333ed11f042ba4d8dab211",
                "15c8a0568dff1e5571f75bf7dcc3595a50ce1f2211d3aa5e4eb242d170af03aa",
                "00566E8A68D1BDF0F073C44722FA2DAA28E7F8FE158C5305CA69CA485F273B16"
            ],
            "uninstaller": {
                "script": [
                    "sudo regedit /s $dir\\unassoc.reg",
                    "sudo setuserfta .jpg AppX43hnxtbyyps62jhe9sqpdzxn1790zetc",
                    "sudo setuserfta .png AppX43hnxtbyyps62jhe9sqpdzxn1790zetc",
                    "sudo setuserfta .bmp AppX43hnxtbyyps62jhe9sqpdzxn1790zetc",
                    "ie4uinit.exe -show"
                ]
            }
        },
        "32bit": {
            "url": [
                "https://download.xnview.com/XnViewMP-win.zip",
                "https://raw.githubusercontent.com/kkzzhizhou/scoop-zapps/master/scripts/xnviewmp/assoc.reg",
                "https://raw.githubusercontent.com/kkzzhizhou/scoop-zapps/master/scripts/xnviewmp/unassoc.reg"
            ],
            "hash": [
                "6ed6f6f80bcacec396fb19fe4d652d2508b735dfe42fa4a121b9ed360faeba3b",
                "15c8a0568dff1e5571f75bf7dcc3595a50ce1f2211d3aa5e4eb242d170af03aa",
                "00566E8A68D1BDF0F073C44722FA2DAA28E7F8FE158C5305CA69CA485F273B16"
            ],
            "uninstaller": {
                "script": [
                    "sudo regedit /s $dir\\unassoc.reg",
                    "ie4uinit.exe -show"
                ]
            }
        }
    },
    "extract_dir": "XnViewMP",
    "bin": "xnviewmp.exe",
    "shortcuts": [
        [
            "xnviewmp.exe",
            "XnViewMP"
        ]
    ],
    "pre_install": [
        "if (!(Test-Path \"$env:APPDATA\\XnViewMP\\xnview.ini\")) {",
        "    New-Item -Force -Path \"$env:APPDATA\\XnViewMP\" -Name \"xnview.ini\" -ItemType file | Out-Null}"
    ],
    "post_install": [
        "if (Test-Path(\"$dir\\assoc.reg\")) {",
        "    $path = \"$dir\" -Replace '\\\\', '\\\\'",
        "    $content = Get-Content \"$dir\\assoc.reg\"",
        "    $content = $content -Replace '\\$Path', $path",
        "    Set-Content \"$dir\\assoc.reg\" $content -Encoding ASCII",
        "}",
        "sudo setuserfta .jpg XnViewMP.jpg",
        "sudo setuserfta .png XnViewMP.png",
        "sudo setuserfta .bmp XnViewMP.bmp",
        "sudo setuserfta .webp XnViewMP.webp",
        "sudo setuserfta .gif XnViewMP.gif",
        "sudo setuserfta .icns XnViewMP.icns",
        "sudo setuserfta .ico XnViewMP.ico",
        "sudo setuserfta .psd XnViewMP.psd",
        "sudo regedit /s $dir\\assoc.reg",
        "ie4uinit.exe -show"
    ],
    "checkver": "Download <strong>XnView MP ([\\d.]+)",
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://download.xnview.com/XnViewMP-win-x64.zip"
            },
            "32bit": {
                "url": "https://download.xnview.com/XnViewMP-win.zip"
            }
        }
    }
}
