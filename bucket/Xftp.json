{
    "homepage": "https://www.netsarang.com/zh/Xftp/",
    "description": "业界最强大的SSH客户机",
    "version": "6.0.0199",
    "depends": [
        "sudo",
        "vcredist2008",
        "vcredist2012"
    ],
    "url": "https://zapps.ziiyc.com/Xftp/Xftp-6.0.0199r.exe#/setup.exe",
    "hash": "ee252d474ba21df9fc3be45557fa8f445ab99325c35abca1b3776f263655de1f",
    "pre_install": [
        "function AddHosts([string]$IPURL) {",
        "    if((Get-Content $env:windir\\System32\\drivers\\etc\\hosts |?{$_ -match \"$IPURL\"}) -eq $null) {",
        "        \"`n$IPURL\" | sudo Out-File -FilePath \"$env:windir\\System32\\drivers\\etc\\hosts\" -Append -encoding ascii",
        "        Write-Host \"success: add $IPURL to hosts\"",
        "    }",
        "}",
        "AddHosts \"127.0.0.1 transact.netsarang.com\"",
        "AddHosts \"127.0.0.1 update.netsarang.com\"",
        "AddHosts \"127.0.0.1 www.netsarang.com\"",
        "AddHosts \"127.0.0.1 www.netsarang.co.kr\"",
        "AddHosts \"127.0.0.1 sales.netsarang.com\"",
        "AddHosts \"127.0.0.1 active.netsarang.com\"",
        "AddHosts \"127.0.0.1 up.netsarang.com\""
    ],
    "installer": {
        "script": [
            "Start-Process -Wait \"$dir\\setup.exe\" \"/b$dir /S /v/qn\" -Verb RunAs",
            "Start-Process -Wait msiexec \"/i `\"$dir\\Xftp` 6.msi`\" INSTALLDIR=`\"$dir`\" /qb\" -Verb RunAs"
        ],
        "keep": true
    },
    "post_install": [
        "$null, $bucket = find_manifest($app)",
        "$bucketdir = Find-BucketDirectory($bucket)",
        "$userdir = $env:USERPROFILE.Replace('\\', '\\\\')",
        "$escdir = $dir -replace \"\\\\\",\"\\\\\"",
        "(gc \"$bucketdir\\..\\scripts\\xftp\\register.reg.templ\") | % { $_ -replace 'USERPROFILE', \"$userdir\" } | out-file -enc oem \"$dir\\register.reg\"",
        "sudo regedit /s $dir\\register.reg",
        "Remove-Item \"$env:PUBLIC\\Desktop\\Xmanager` Power` Suite` 6\" -Recurse -ErrorAction SilentlyContinue",
        "sudo Remove-Item \"$env:ProgramData\\Microsoft\\Windows\\Start` Menu\\Programs\\SHELL_OBJECT_FOLDER\" -Recurse -ErrorAction SilentlyContinue",
        "ie4uinit.exe -show"
    ],
    "uninstaller": {
        "script": "Start-Process -Wait msiexec \"/x `\"$dir\\Xftp` 6.msi`\" /qb\" -Verb RunAs"
    },
    "shortcuts": [
        [
            "Xftp.exe",
            "Xftp"
        ]
    ],
    "checkver": {
        "url": "https://zapps.ziiyc.com/Xftp/Xftp.latest",
        "regex": "([\\d.]+)"
    },
    "autoupdate": {
        "url": "https://zapps.ziiyc.com/Xftp/Xftp-$versionr.exe#/setup.exe",
        "hash": {
            "url": "$url.sha256",
            "regex": "$sha256"
        }
    }
}
